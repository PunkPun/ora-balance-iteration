^SlowedByCrushing:
	ExternalCondition@CRUSHATTEMPTSLOW:
		Condition: crush-attempt-slow
	SpeedMultiplier@CRUSHATTEMPTSLOW:
		RequiresCondition: crush-attempt-slow && !crush-slow
		Modifier: 75
	ExternalCondition@CRUSHSLOW:
		Condition: crush-slow
	SpeedMultiplier@CRUSHSLOW:
		RequiresCondition: crush-slow
		Modifier: 50

^Infantry:
	GrantExternalConditionToCrusher@CRUSHATTEMPTSLOW:
		WarnCrushCondition: crush-attempt-slow
		WarnCrushDuration: 50
		OnCrushCondition: crush-attempt-slow
		OnCrushDuration: 100
	DetectCloaked:
		DetectionTypes: Underwater, Cloak #Cloak
		Range: 1c0

^Vehicle:
	Inherits@SLOWEDBYCRUSHING: ^SlowedByCrushing

^Ship:
	Mobile:
		Locomotor: naval
	Targetable:
		TargetTypes: WaterActor, Ship
	Explodes:
		Weapon: UnitExplodeShip
		EmptyWeapon: UnitExplodeShip

^CommandoSkull:
	WithDecoration@COMMANDOSKULL:
		Image: pips
		Sequence: pip-skull
		Palette: effect
		Position: TopLeft
		ValidRelationships: Ally, Enemy, Neutral

JEEP:
	Mobile:
		Speed: 164
	Health:
		HP: 18000

2TNK:
	Valued:
		Cost: 900

ARTY:
	Mobile:
		TurnSpeed: 16

MCV:
	Valued:
		Cost: 1650
	Buildable:
		BuildDurationModifier: 60

TTNK:
	RevealsShroud:
		MinRange: 5c0
	RevealsShroud@GAPGEN:
		Range: 5c0

E7:
	Inherits@COMMANDOSKULL: ^CommandoSkull
	Valued:
		Cost: 2000

SPY:
	Inherits@COMMANDOSKULL: ^CommandoSkull
	WithDecoration@COMMANDOSKULL:
		RequiresCondition: tanyadisguise
	Disguise:
		DisguisedAsConditions:
			e7: tanyadisguise

SPY.England:
	Buildable:
		Prerequisites: ~infantry.england, fix, ~!dome, ~tent, ~techlevel.medium
	Valued:
		Cost: 1000

SPY.EnglandRadar:
	Inherits: SPY
	Buildable:
		Prerequisites: ~infantry.england, ~dome, ~tent, ~techlevel.medium
	RenderSprites:
		Image: spy

MGG:
	WithIdleOverlay@SPINNER:
		PauseOnCondition: undeployed
	CreatesShroud:
		RequiresCondition: !undeployed
		Range: 7c0
	GrantConditionOnDeploy:
		DeployedCondition: undeployed
	RevealsShroud:
		MinRange: 5c0
		Range: 7c0
		RevealGeneratedShroud: False
	RevealsShroud@GAPGEN:
		Range: 5c0

TSLA:
	RevealsShroud:
		MinRange: 5c0
	RevealsShroud@GAPGEN:
		Range: 5c0
	DetectCloaked:
		DetectionTypes: Cloak, Underwater #Cloak
		Range: 6c0

PBOX:
	DetectCloaked:
		Range: 6c0
		DetectionTypes: Cloak, Underwater #Cloak

HBOX:
	DetectCloaked:
		Range: 6c0
		DetectionTypes: Cloak, Underwater #Cloak

GUN:
	DetectCloaked:
		Range: 6c0
		DetectionTypes: Cloak, Underwater #Cloak

FTUR:
	DetectCloaked:
		Range: 6c0
		DetectionTypes: Cloak, Underwater #Cloak

GAP:
	RevealsShroud:
		MinRange: 5c0
		Range: 7c0
		RevealGeneratedShroud: False
	RevealsShroud@GAPGEN:
		Range: 5c0
	CreatesShroud:
		Range: 7c0
		RequiresCondition: !disabled

PROC:
	Targetable:
		TargetTypes: GroundActor, Structure, C4, DetonateAttack
	ExternalCondition@PROTECTED:
		Condition: protected
	Targetable@INFILTRATE:
		TargetTypes: ThiefInfiltrate, SpyInfiltrate
		RequiresCondition: !protected

SILO:
	Targetable:
		TargetTypes: GroundActor, Structure, C4, DetonateAttack
	ProximityExternalCondition@PROTECTED:
		Range: 18c0
		Condition: protected
	JamsMissiles:
		Range: 18c0
		DeflectionRelationships: None
	RenderJammerCircle:


AFLD:
	Exit@1:
		ExitCell: 1,3
	Exit@2:
		RequiresCondition: !being-captured
		ExitCell: 0,0
		Facing: 256
	AirstrikePower@spyplane:
		Description: Reveals an area of the map and submarines.

MIG:
	Health:
		HP: 8000

IRON:
	Inherits@shape: ^2x2Shape
	Valued:
		Cost: 2500
	Building:
		Footprint: xx xx
		Dimensions: 2,2
	Selectable:
		Bounds: 2048, 2133, 0, -170
		-DecorationBounds: 2133, 2133, 0, -512

STEK:
	InfiltrateForSupportPower:
		Proxy: powerproxy.sonarpulse
		Types: SpyInfiltrate
	Targetable:
		TargetTypes: GroundActor, C4, DetonateAttack, Structure, SpyInfiltrate

ATEK:
	GpsPower:
		PauseOnCondition: disabled || !gpsactivated
		ChargeInterval: 1
		RevealDelay: 30
		DisplayTimerRelationships: None
		RequiresCondition: gpsactivated
		StartFullyCharged: True
		RequiresActiveRadar: True
	ProduceActorPower@powergps:
		Name: GPS Satellite
		Description: Reveals map terrain and provides tactical\ninformation.
		Icon: gps
		PauseOnCondition: disabled
		Actors: gpsactivenoise
		Type: GPSPower
		ChargeInterval: 4500
		OrderName: GPSSpawner
		SupportPowerPaletteOrder: 20
		LaunchSpeechNotification:
		IncomingSpeechNotification:
		DisplayTimerRelationships: None
		EndChargeSpeechNotification: SatelliteReady
		RequiresCondition: !gpsactivated
	ProduceActorPower@gpsactivesign:
		Name: GPS Active Timer
		Description: Displays the amount of time the satellite is still active.
		Icon: gpsactive
		Actors: e1
		Type: Infantry
		ChargeInterval: 1501
		SupportPowerPaletteOrder: 20
		DisplayTimerRelationships: Ally, Neutral, Enemy
		RequiresCondition: gpsactivated
	GrantConditionOnPrerequisite@gpsactivation:
		Prerequisites: gpsactiveprereq
		Condition: gpsactivated
	ProvidesPrerequisite@uplink:
		Prerequisite: uplink
	Exit@1:
		SpawnOffset: -704,768,0
		ExitCell: -1,2
	Production@GPSPower:
		Produces: GPSPower
	InfiltrateForSupportPower:
		Proxy: powerproxy.sonarpulse
		Types: SpyInfiltrate

gpsactivenoise:
	Interactable:
	EditorOnlyTooltip:
		Name: (GPS Active Noise Dummy)
	AlwaysVisible:
	Aircraft:
		Repulsable: False
	BodyOrientation:
		QuantizedFacings: 1
	WithSpriteBody:
	RenderSpritesEditorOnly:
		Image: camera
	MapEditorData:
		Categories: System
	ProvidesPrerequisite@gap:
		Prerequisite: gpsactiveprereq
	ActorLostNotification:
		Notification: SatelliteInitialized
		NotifyAll: True
	Health:
		HP: 1
	HitShape:
	ChangesHealth:
		Step: -1
		StartIfBelow: 101
		Delay: 1
	SpawnActorOnDeath:
		Actor: powergps
		SpawnAfterDefeat: False
	KillsSelf:

powergps:
	Interactable:
	EditorOnlyTooltip:
		Name: (GPS Power Dummy)
	AlwaysVisible:
	Aircraft:
		Repulsable: False
	BodyOrientation:
		QuantizedFacings: 1
	WithSpriteBody:
	RenderSpritesEditorOnly:
		Image: camera
	MapEditorData:
		Categories: System
	ProvidesPrerequisite@gap:
		Prerequisite: gpsactiveprereq
	ActorLostNotification:
		Notification: SatelliteTerminated
		NotifyAll: True
	Health:
		HP: 1499
	HitShape:
	ChangesHealth:
		Step: -1
		StartIfBelow: 101
		Delay: 1
	GrantConditionOnPrerequisite@satelliteexists:
		Prerequisites: uplink
		Condition: uplinkexists
	KillsSelf:
		RequiresCondition: !uplinkexists

SS:
	Valued:
		Cost: 950
	Health:
		HP: 25000
	Armor:
		Type: Steel
	Mobile:
		TurnSpeed: 20 #16
		Speed: 78
	RevealsShroud:
		MinRange: 5c0
		Range: 8c0
		RevealGeneratedShroud: False
	RevealsShroud@GAPGEN:
		Range: 5c0
	Targetable:
		TargetTypes: WaterActor, Ship, Submarine, Repair
		RequiresCondition: !underwater
	Targetable@UNDERWATER:
		TargetTypes: WaterActor, Ship, Submarine, Repair #Underwater, Submarine
		RequiresCondition: underwater
	Cloak:
		DetectionTypes: Underwater
		InitialDelay: 0
		CloakDelay: 20
		CloakSound: subshow1.aud
		UncloakSound: subshow1.aud
		CloakedCondition: underwater
		Palette: submerged
		UncloakOn: Attack, Unload, Dock, Damage, Heal
		PauseOnCondition: cloak-force-disabled
	GrantConditionOnDamageState@UNCLOAK:
		Condition: cloak-force-disabled
		ValidDamageStates: Critical
	Armament:
		Weapon: TorpTube
		LocalOffset: 0,-171,0, 0,171,0
		FireDelay: 2
	DetectCloaked:
		DetectionTypes: Underwater
		Range: 4c0
	WithDamageOverlay:
		MinimumDamageState: Critical

MSUB:
	Buildable:
		Prerequisites: ~spen, dome, ~techlevel.high
	Valued:
		Cost: 2000
	Health:
		HP: 40000
	Armor:
		Type: Steel
	Mobile:
		TurnSpeed: 16 #12
		Speed: 44
	RevealsShroud:
		MinRange: 5c0
		Range: 8c0
		RevealGeneratedShroud: False
	RevealsShroud@GAPGEN:
		Range: 5c0
	Targetable:
		TargetTypes: WaterActor, Ship, Submarine, Repair
		RequiresCondition: !underwater
	Targetable@UNDERWATER:
		TargetTypes: WaterActor, Ship, Submarine, Repair #Underwater, Submarine
		RequiresCondition: underwater
	Cloak:
		DetectionTypes: Underwater
		InitialDelay: 0
		CloakDelay: 20
		CloakSound: subshow1.aud
		UncloakSound: subshow1.aud
		CloakedCondition: underwater
		Palette: submerged
		PauseOnCondition: cloak-force-disabled
		UncloakOn: Attack, Unload, Dock, Damage, Heal
	GrantConditionOnDamageState@UNCLOAK:
		Condition: cloak-force-disabled
		ValidDamageStates: Critical
	Armament@PRIMARY:
		Weapon: SubMissile
		LocalOffset: 0,-171,0, 0,171,0
		FireDelay: 2
	Armament@SECONDARY:
		Weapon: SubMissileAA
		LocalOffset: 0,-171,0, 0,171,0
		FireDelay: 2
	DetectCloaked:
		DetectionTypes: Underwater
		Range: 7c0 #4c0
	WithDamageOverlay:
		MinimumDamageState: Critical

DD:
	Valued:
		Cost: 1000
	Health:
		HP: 40000
	Armor:
		Type: Steel
	Mobile:
		TurnSpeed: 24 #28
		Speed: 92
	RevealsShroud:
		MinRange: 4c0 #5c0
		Range: 5c0 #6c0
		RevealGeneratedShroud: False
	RevealsShroud@GAPGEN:
		Range: 4c0 #5c0
	Turreted:
		TurnSpeed: 28
		Offset: 469,0,128
	Armament@PRIMARY:
		Weapon: Stinger
		LocalOffset: 0,-100,0, 0,100,0
		LocalYaw: 64, -64
	Armament@SECONDARY:
		Weapon: DDDepthCharge
		LocalOffset: 0,-100,0, 0,100,0
		LocalYaw: 80, -80
	Armament@TERTIARY:
		Weapon: StingerAA
		LocalOffset: 0,-100,0, 0,100,0
		LocalYaw: 64, -64
	DetectCloaked:
		DetectionTypes: Underwater
		Range: 3c0 #4c0

CA:
	Valued:
		Cost: 2400
	Health:
		HP: 80000
	Armor:
		Type: Steel
	Mobile:
		TurnSpeed: 12
		Speed: 44
	RevealsShroud:
		MinRange: 5c0
		Range: 7c0
		RevealGeneratedShroud: False
	RevealsShroud@GAPGEN:
		Range: 5c0
	Turreted@PRIMARY:
		Turret: primary
		Offset: -896,0,128
		TurnSpeed: 12
	Turreted@SECONDARY:
		Turret: secondary
		Offset: 768,0,128
		TurnSpeed: 12
	Armament@PRIMARY:
		Turret: primary
		Weapon: 8Inch
		LocalOffset: 480,-100,40, 480,100,40
		Recoil: 171
		RecoilRecovery: 34
		MuzzleSequence: muzzle
	Armament@SECONDARY:
		Name: secondary
		Turret: secondary
		Weapon: 8Inch
		LocalOffset: 480,-100,40, 480,100,40
		Recoil: 171
		RecoilRecovery: 34
		MuzzleSequence: muzzle
	AttackTurreted:
		Turrets: primary, secondary
		TargetFrozenActors: True
		ForceFireIgnoresActors: True

LST:
	Valued:
		Cost: 500 #700
	Health:
		HP: 40000 #35000
	Armor:
		Type: Steel
	Mobile:
		Locomotor: lcraft
		Speed: 128
		PauseOnCondition: notmobile
	RevealsShroud:
		MinRange: 5c0
		Range: 6c0
		RevealGeneratedShroud: False
	RevealsShroud@GAPGEN:
		Range: 5c0
	WithLandingCraftAnimation:
		OpenTerrainTypes: Clear, Rough, Road, Ore, Gems, Beach
	Cargo:
		Types: Infantry, Vehicle
		MaxWeight: 10 #5

PT:
	Valued:
		Cost: 500
	Health:
		HP: 20000
	Armor:
		Type: Steel
	Mobile:
		TurnSpeed: 24 #28
		Speed: 142
	RevealsShroud:
		MinRange: 5c0
		Range: 8c0
		RevealGeneratedShroud: False
	RevealsShroud@GAPGEN:
		Range: 5c0
	Turreted:
		TurnSpeed: 28
		Offset: 512,0,0
	Armament@PRIMARY:
		Weapon: 2Inch
		LocalOffset: 208,0,48
		MuzzleSequence: muzzle
	Armament@SECONDARY:
		Name: secondary
		Weapon: DepthCharge
		MuzzleSequence: muzzle
	DetectCloaked:
		DetectionTypes: Underwater
		Range: 6c0

SPEN:
	Valued:
		Cost: 600 #800
	Health:
		HP: 75000 #100000
	Tooltip:
		Name: Sub Pen
	DetectCloaked:
		DetectionTypes: Underwater
		Range: 10c0

SYRD:
	Valued:
		Cost: 600 #1000
	Health:
		HP: 75000 #100000
	DetectCloaked:
		DetectionTypes: Underwater
		Range: 10c0

SYRF:
	Valued:
		Cost: 50 #100

SPEF:
	Valued:
		Cost: 50 #80

camera.spyplane:
	Inherits: CAMERA
	EditorOnlyTooltip:
		Name: (support power proxy camera)
	DetectCloaked:
		DetectionTypes: Underwater
		Range: 10c0

powerproxy.sonarpulse:
	AlwaysVisible:
	SpawnActorPower:
		Icon: sonar
		Name: Sonar Pulse
		Description: Reveals map and submarines in the vicinity for a \nshort time.
		ChargeInterval: 3250
		EndChargeSpeechNotification: SonarPulseReady
		SelectTargetSpeechNotification: SelectTarget
		EndChargeTextNotification: Sonar pulse ready.
		SelectTargetTextNotification: Select target.
		Actor: sonar
		Terrain: Water
		AllowUnderShroud: false
		LifeTime: 250
		DeploySound: sonpulse.aud
		EffectImage: moveflsh
		EffectPalette: moveflash
		SupportPowerPaletteOrder: 80
		EffectSequence: idle

SONAR:
	Inherits: camera.spyplane
	EditorOnlyTooltip:
		Name: (support power proxy camera)
	RevealsShroud:
		Range: 10c0
		Type: CenterPosition
	DetectCloaked:
		DetectionTypes: Underwater
		Range: 10c0
